import ora from 'ora';
import path from 'path';
import {generateFile} from '../../helpers/template';

/**
 * Create a new test file from the test stub
 *
 * @param {string} name
 * @return {Promise<void>}
 */
export default async function makeTest(name: string) {
  const spinner = ora().start();
  spinner.info(`Generating a new test: ${name}`);
  const cwd = process.cwd();
  await generateFile(
    'test',
    {
      name: name.toLowerCase()
    },
    path.resolve(cwd, `tests/${name.toLowerCase()}.test.js`)
  );
  spinner.succeed(`Congratulations! Generate a test: ${name} successfully`);
}
