import {promises as fs} from 'fs';
import ora from 'ora';
import path from 'path';
import {generateFile} from '../../helpers/template';

/**
 * Create a new script file
 *
 * @param {string} name
 * @return {Promise<void>}
 */
export default async function makeScript(name: string) {
  const spinner = ora().start();
  spinner.start(`Generating a new script: ${name}`);
  const cwd = process.cwd();
  await fs.mkdir(`${cwd}/scripts/${name}`, {
    recursive: true
  });
  await generateFile('script', {}, path.resolve(cwd, `scripts/${name}.js`));
  spinner.succeed(`Congratulations! Generate script: ${name} successfully`);
}
